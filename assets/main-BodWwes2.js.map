{"version":3,"file":"main-BodWwes2.js","sources":["../../src/main.js"],"sourcesContent":["/**\n * ZEPHYX-TAP — Official Final Script 2026\n * Оптимизированный JS: валидация, индивидуальные триггеры, анимации.\n */\n\n// Регистрация плагинов\ngsap.registerPlugin(ScrollTrigger);\n\ndocument.addEventListener('DOMContentLoaded', () => {\n    \n    // 1. ИНИЦИАЛИЗАЦИЯ ИКОНОК\n    if (typeof lucide !== 'undefined') lucide.createIcons();\n\n    // 2. МОБИЛЬНОЕ МЕНЮ\n    const burger = document.getElementById('burger-menu');\n    const mobileMenu = document.getElementById('mobile-menu');\n    const mobileLinks = document.querySelectorAll('.mobile-menu__link');\n\n    const toggleMenu = (forceClose = false) => {\n        if (!mobileMenu || !burger) return;\n        const isOpen = forceClose ? false : !mobileMenu.classList.contains('active');\n        \n        mobileMenu.classList.toggle('active', isOpen);\n        burger.classList.toggle('active', isOpen);\n        document.body.style.overflow = isOpen ? 'hidden' : '';\n        \n        const lines = burger.children;\n        if (lines.length >= 3) {\n            gsap.to(lines[0], { y: isOpen ? 8 : 0, rotate: isOpen ? 45 : 0, duration: 0.3 });\n            gsap.to(lines[1], { opacity: isOpen ? 0 : 1, duration: 0.2 });\n            gsap.to(lines[2], { y: isOpen ? -8 : 0, rotate: isOpen ? -45 : 0, duration: 0.3 });\n        }\n    };\n\n    if (burger) burger.addEventListener('click', () => toggleMenu());\n    mobileLinks.forEach(link => link.addEventListener('click', () => toggleMenu(true)));\n\n    // 3. АНИМАЦИЯ HERO (SplitType + Градиентный Фикс)\n    const heroTitle = document.querySelector('#hero-title');\n    if (heroTitle) {\n        new SplitType(heroTitle, { types: 'words, chars', tagName: 'span' });\n        const chars = heroTitle.querySelectorAll('.char:not(span .char)');\n        const gradientSpan = heroTitle.querySelector('span');\n\n        const heroTl = gsap.timeline({ delay: 0.5 });\n        heroTl.from('.hero__tagline', { opacity: 0, x: -30, duration: 0.8 })\n              .from(chars, { opacity: 0, y: 30, rotateX: -90, stagger: 0.02, duration: 0.8, ease: \"back.out(1.7)\" }, \"-=0.4\")\n              .from(gradientSpan, { opacity: 0, y: 20, duration: 0.8, clearProps: \"all\" }, \"-=0.6\")\n              .from('.hero__description, .hero__btns, .hero__stats', { opacity: 0, y: 20, stagger: 0.1, duration: 0.8 }, \"-=0.4\");\n    }\n\n    // 4. ИНДИВИДУАЛЬНЫЕ СКРОЛЛ-ТРИГГЕРЫ (Исправление \"только первых элементов\")\n    // Каждый элемент анимируется независимо при входе во вьюпорт\n    const selectorsToAnimate = ['.platform__card', '.benefit-card', '.blog-card', '.innovation-item'];\n    \n    selectorsToAnimate.forEach(selector => {\n        gsap.utils.toArray(selector).forEach((item) => {\n            gsap.from(item, {\n                scrollTrigger: {\n                    trigger: item,\n                    start: \"top 90%\",\n                    toggleActions: \"play none none none\"\n                },\n                opacity: 0,\n                y: 40,\n                duration: 0.8,\n                ease: \"power2.out\"\n            });\n        });\n    });\n\n    // 5. ИНТЕРАКТИВ (GLOW & PARALLAX)\n    const glow = document.getElementById('hero-glow');\n    const heroVisual = document.querySelector('.hero__visual');\n    const heroCard = document.querySelector('.hero__card');\n\n    window.addEventListener('mousemove', (e) => {\n        if (glow) {\n            gsap.to(glow, { x: e.clientX - 300, y: e.clientY - 300, duration: 1 });\n        }\n        if (heroVisual && heroCard) {\n            const rect = heroVisual.getBoundingClientRect();\n            const x = (e.clientX - rect.left) / rect.width - 0.5;\n            const y = (e.clientY - rect.top) / rect.height - 0.5;\n            gsap.to(heroCard, { rotateY: x * 15, rotateX: -y * 15, duration: 0.6 });\n        }\n    });\n\n    // 6. ИННОВАЦИИ: ПЕРЕКЛЮЧЕНИЕ СЦЕН\n    const innovationItems = document.querySelectorAll('.innovation-item');\n    innovationItems.forEach(item => {\n        item.addEventListener('mouseenter', () => {\n            const sceneId = item.getAttribute('data-scene');\n            \n            document.querySelectorAll('.innovation-item').forEach(i => i.classList.remove('active'));\n            document.querySelectorAll('.scene').forEach(s => s.classList.remove('active'));\n            \n            item.classList.add('active');\n            const targetScene = document.getElementById(`scene-${sceneId}`);\n            if (targetScene) {\n                targetScene.classList.add('active');\n                gsap.fromTo(targetScene, { scale: 0.9, opacity: 0 }, { scale: 1, opacity: 1, duration: 0.4 });\n            }\n        });\n    });\n\n    // 7. ВАЛИДАЦИЯ ФОРМЫ (Телефон без букв + Капча)\n    const phoneInput = document.getElementById('phone');\n    if (phoneInput) {\n        // ЗАПРЕТ БУКВ: Оставляем только цифры и знак +\n        phoneInput.addEventListener('input', (e) => {\n            e.target.value = e.target.value.replace(/[^\\d+]/g, '');\n        });\n    }\n\n    const contactForm = document.getElementById('main-form');\n    if (contactForm) {\n        const captchaLabel = document.getElementById('captcha-label');\n        const captchaInput = document.getElementById('captcha-input');\n        \n        let n1 = Math.floor(Math.random() * 10) + 1;\n        let n2 = Math.floor(Math.random() * 5) + 1;\n        let correctSum = n1 + n2;\n        if (captchaLabel) captchaLabel.textContent = `Решите пример: ${n1} + ${n2} = ?`;\n\n        contactForm.addEventListener('submit', (e) => {\n            e.preventDefault();\n            const successMsg = document.getElementById('form-success');\n            const errorMsg = document.getElementById('form-error');\n\n            if (parseInt(captchaInput.value) !== correctSum) {\n                errorMsg.style.display = 'flex';\n                gsap.from(errorMsg, { x: 10, repeat: 3, yoyo: true, duration: 0.1 });\n                return;\n            }\n\n            const btn = contactForm.querySelector('button');\n            btn.disabled = true;\n            btn.textContent = \"Отправка...\";\n\n            setTimeout(() => {\n                btn.style.display = 'none';\n                successMsg.style.display = 'flex';\n                contactForm.reset();\n            }, 1500);\n        });\n    }\n\n    // 8. COOKIE POPUP\n    const cookiePopup = document.getElementById('cookie-popup');\n    const acceptCookies = document.getElementById('accept-cookies');\n\n    if (cookiePopup && !localStorage.getItem('zephyx_cookies')) {\n        setTimeout(() => cookiePopup.classList.add('active'), 3000);\n    }\n\n    if (acceptCookies) {\n        acceptCookies.addEventListener('click', () => {\n            localStorage.setItem('zephyx_cookies', 'true');\n            cookiePopup.classList.remove('active');\n        });\n    }\n});"],"names":["burger","mobileMenu","mobileLinks","toggleMenu","forceClose","isOpen","lines","link","heroTitle","chars","gradientSpan","selector","item","glow","heroVisual","heroCard","rect","x","y","sceneId","i","s","targetScene","phoneInput","contactForm","captchaLabel","captchaInput","n1","n2","correctSum","e","successMsg","errorMsg","btn","cookiePopup","acceptCookies"],"mappings":"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"}